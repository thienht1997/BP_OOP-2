<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>CodeGym Ca-ro Demo</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        button {
            background: #26C281;
            color: #fff;
            font-weight: bold;
            border: 1px solid yellow;
        }

        #game-board {
            position: relative;
            margin-top: 50px;
        }

        .cell {
            border: solid 1px blue;
            text-align: center;
            font-size: 20pt;
            cursor: pointer;
            color: red;
        }
    </style>
</head>

<body>
    <button onclick="start()">Start</button>
    <div id="game-board">
        <div id="cell-0-0" onclick="play(0,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-1" onclick="play(0,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-2" onclick="play(0,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-3" onclick="play(0,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-4" onclick="play(0,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-5" onclick="play(0,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-6" onclick="play(0,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-7" onclick="play(0,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-8" onclick="play(0,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:0px; line-height: 40px;"></div>
        <div id="cell-0-9" onclick="play(0,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:0px; line-height: 40px;"></div>
        <div id="cell-1-0" onclick="play(1,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-1" onclick="play(1,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-2" onclick="play(1,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-3" onclick="play(1,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-4" onclick="play(1,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-5" onclick="play(1,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-6" onclick="play(1,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-7" onclick="play(1,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-8" onclick="play(1,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:40px; line-height: 40px;"></div>
        <div id="cell-1-9" onclick="play(1,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:40px; line-height: 40px;"></div>
        <div id="cell-2-0" onclick="play(2,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-1" onclick="play(2,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-2" onclick="play(2,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-4" onclick="play(2,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-5" onclick="play(2,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-3" onclick="play(2,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-6" onclick="play(2,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-7" onclick="play(2,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-8" onclick="play(2,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:80px; line-height: 40px;"></div>
        <div id="cell-2-9" onclick="play(2,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:80px; line-height: 40px;"></div>
        <div id="cell-3-0" onclick="play(3,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-1" onclick="play(3,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-2" onclick="play(3,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-3" onclick="play(3,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-4" onclick="play(3,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-5" onclick="play(3,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-6" onclick="play(3,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-7" onclick="play(3,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-8" onclick="play(3,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:120px; line-height: 40px;"></div>
        <div id="cell-3-9" onclick="play(3,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:120px; line-height: 40px;"></div>
        <div id="cell-4-0" onclick="play(4,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-1" onclick="play(4,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-2" onclick="play(4,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-3" onclick="play(4,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-4" onclick="play(4,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-5" onclick="play(4,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-6" onclick="play(4,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-7" onclick="play(4,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-8" onclick="play(4,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:160px; line-height: 40px;"></div>
        <div id="cell-4-9" onclick="play(4,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:160px; line-height: 40px;"></div>
        <div id="cell-5-0" onclick="play(5,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-1" onclick="play(5,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-2" onclick="play(5,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-3" onclick="play(5,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-4" onclick="play(5,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-5" onclick="play(5,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-6" onclick="play(5,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-7" onclick="play(5,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-8" onclick="play(5,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:200px; line-height: 40px;"></div>
        <div id="cell-5-9" onclick="play(5,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:200px; line-height: 40px;"></div>
        <div id="cell-6-0" onclick="play(6,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-1" onclick="play(6,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-2" onclick="play(6,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-3" onclick="play(6,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-4" onclick="play(6,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-5" onclick="play(6,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-6" onclick="play(6,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-7" onclick="play(6,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-8" onclick="play(6,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:240px; line-height: 40px;"></div>
        <div id="cell-6-9" onclick="play(6,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:240px; line-height: 40px;"></div>
        <div id="cell-7-0" onclick="play(7,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-1" onclick="play(7,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-2" onclick="play(7,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-3" onclick="play(7,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-4" onclick="play(7,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-5" onclick="play(7,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-6" onclick="play(7,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-7" onclick="play(7,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-8" onclick="play(7,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:280px; line-height: 40px;"></div>
        <div id="cell-7-9" onclick="play(7,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:280px; line-height: 40px;"></div>
        <div id="cell-8-0" onclick="play(8,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-1" onclick="play(8,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-2" onclick="play(8,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-3" onclick="play(8,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-4" onclick="play(8,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-5" onclick="play(8,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-6" onclick="play(8,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-7" onclick="play(8,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-8" onclick="play(8,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:320px; line-height: 40px;"></div>
        <div id="cell-8-9" onclick="play(8,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:320px; line-height: 40px;"></div>
        <div id="cell-9-0" onclick="play(9,0)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:0px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-1" onclick="play(9,1)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:40px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-2" onclick="play(9,2)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:80px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-3" onclick="play(9,3)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:120px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-4" onclick="play(9,4)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:160px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-5" onclick="play(9,5)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:200px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-6" onclick="play(9,6)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:240px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-7" onclick="play(9,7)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:280px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-8" onclick="play(9,8)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:320px; top:360px; line-height: 40px;"></div>
        <div id="cell-9-9" onclick="play(9,9)" class="cell"
            style="position: absolute; width: 40px; height:40px; left:360px; top:360px; line-height: 40px;"></div>
    </div>
    <script>
        const VALUE_EMPTY = 1;
const VALUE_X = 2;
const VALUE_O = 3;
const DEFAULT_COLS = 10;
const DEFAULT_ROWS = 10;
const DEFAULT_CELL_SIZE = 40;

function Cell(x, y) {
    this.x = x;
    this.y = y;
    this.value = VALUE_EMPTY;
    this.getHtml = function(){
        var top = x * DEFAULT_CELL_SIZE;
        var left = y * DEFAULT_CELL_SIZE;
        var cellHtml = '<div id="cell-'+x+'-'+y+'" onclick="play('+x+','+y+')" class="cell" style="position: absolute; width: '+
            DEFAULT_CELL_SIZE+'px; height:'+
            DEFAULT_CELL_SIZE+'px; left:'+
            left+'px; top:'+
            top+'px; line-height: '+
            DEFAULT_CELL_SIZE+'px;"></div>';
        return cellHtml;
    };
    
    this.draw = function () {
        var cellDiv = document.getElementById("cell-"+x+"-"+y);
        switch (this.value){
            case VALUE_X:
                cellDiv.innerHTML = "X";
                break;
            case VALUE_O:
                cellDiv.innerHTML = "O";
                break;
            default:
                cellDiv.innerHTML = "";
                break;
        }
    }
}

function GameBoard(rows, cols, elementId) {
    this.rows = rows;
    this.cols = cols;
    this.elementId = elementId;
    this.turn = VALUE_O;
    this.cells = [];
    this.isOver = false;
    
    this.draw = function () {
        var gameBoardDiv = document.getElementById(this.elementId);
        gameBoardDiv.innerHTML = "";
        for(var i = 0; i < this.rows; i++){
            var row = [];
            this.cells.push(row);
            for(var j = 0; j < this.cols; j++){
                var cell = new Cell(i, j);
                row.push(cell);
                gameBoardDiv.innerHTML += cell.getHtml();
            }
        }
    };

    this.play = function (x, y) {
        if(this.isOver) {
            return;
        }
        var cell = this.cells[x][y];
        if(cell.value === VALUE_EMPTY){
            cell.value = this.turn;
            cell.draw();
            this.check(x, y);
            if(this.turn === VALUE_O){
                this.turn = VALUE_X;
            } else {
                this.turn = VALUE_O;
            }
        } else {
            alert("Cell is not empty");
        }
    };
    
    this.check = function (x, y) {
        var cell = this.cells[x][y];
        //Horizontal
        var count = 1;
        var i = 1;
        while((y + i < this.cols) && this.cells[x][y + i].value ===  cell.value){
            count++;
            i++;
        }
        var i = 1;
        while((y - i >= 0) && this.cells[x][y - i].value ===  cell.value){
            count++;
            i++;
        }
        this.endGame(count);
        //Vertical
        var count = 1;
        var i = 1;
        while((x + i < this.rows) &&this.cells[x + i][y].value ===  cell.value){
            count++;
            i++;
        }
        var i = 1;
        while((x - i >= 0) &&this.cells[x - i][y].value ===  cell.value){
            count++;
            i++;
        }
        this.endGame(count);
        //Left diagonal
        var count = 1;
        var i = 1;
        var j = 1;
        while((y + i < this.cols) && (x + i < this.rows) && this.cells[x + i][y + j].value ===  cell.value){
            count++;
            i++;
            j++;
        }
        var i = 1;
        var j = 1;
        while((x - i >= 0) && (y - j >= 0) && this.cells[x - i][y - j].value ===  cell.value){
            count++;
            i++;
            j++;
        }
        this.endGame(count);
        //Right diagonal
        var count = 1;
        var i = 1;
        var j = 1;
        while((y + j < this.cols) && (x - i >= 0) && this.cells[x - i][y + j].value ===  cell.value){
            count++;
            i++;
            j++;
        }
        var i = 1;
        var j = 1;
        while((y - j >= 0) && (x + i < this.rows) &&this.cells[x + i][y - j].value ===  cell.value){
            count++;
            i++;
            j++;
        }
        this.endGame(count);
    };

    this.endGame = function (count) {
        if(count >= 5){
            this.isOver = true;
            alert("You won!!!");
        }
    };
}

function play(x, y) {
   gameBoard.play(x, y);
}

function start() {
    gameBoard = new GameBoard(DEFAULT_ROWS, DEFAULT_COLS, "game-board");
    gameBoard.draw();
}
var gameBoard;
start();
    </script>

</body>

</html>